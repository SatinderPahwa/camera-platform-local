# VBC01 Camera Platform - EMQX Edition
# Configuration Template
# Copy this file to .env and fill in your values

# ============================================================================
# EMQX Broker Configuration
# ============================================================================
# Domain name that resolves to your EMQX server
EMQX_BROKER_ENDPOINT=camera.example.com
EMQX_BROKER_PORT=8883

# ============================================================================
# Server Configuration
# ============================================================================
# Config server (provides certificates to cameras)
# IMPORTANT: Use your server's local IP (not 0.0.0.0) for security
# Example: CONFIG_SERVER_HOST=192.168.1.100
CONFIG_SERVER_HOST=0.0.0.0
CONFIG_SERVER_PORT=8443

# Dashboard web server
DASHBOARD_SERVER_HOST=0.0.0.0
DASHBOARD_SERVER_PORT=5000
DASHBOARD_URL=http://localhost:5000

# ============================================================================
# MQTT Configuration
# ============================================================================
# Local MQTT broker connection (for processor and dashboard)
MQTT_BROKER_HOST=127.0.0.1
MQTT_BROKER_PORT=8883
MQTT_KEEPALIVE=60
MQTT_USE_TLS=false
PROCESSOR_CLIENT_ID=camera_event_processor

# ============================================================================
# File Paths
# ============================================================================
# Upload directory for camera recordings and thumbnails
UPLOAD_BASE_DIR=./data/uploads

# Database path
DATABASE_PATH=./data/camera_events.db

# ============================================================================
# Telegram Configuration
# ============================================================================
# Get bot token from @BotFather on Telegram
TELEGRAM_ENABLED=true
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here

# Notification settings
TELEGRAM_NOTIFY_MOTION=true
TELEGRAM_NOTIFY_PERSON=true
TELEGRAM_NOTIFY_SOUND=false

# ============================================================================
# Authentication Configuration
# ============================================================================
# Flask secret key (generate with: python3 -c "import os; print(os.urandom(24).hex())")
FLASK_SECRET_KEY=your_secret_key_here

# Admin credentials
ADMIN_USERNAME=admin
ADMIN_PASSWORD=change_me_in_production

# Google OAuth (Optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ============================================================================
# TURN Server Configuration (REQUIRED for livestreaming)
# ============================================================================
# CRITICAL: TURN server is REQUIRED for WebRTC livestreaming
# Without TURN, livestreaming only works on local network
# Format: turns:domain:5349 or turn:domain:3478
TURN_SERVER_URL=turns:camera.example.com:5349
TURN_SERVER_USERNAME=turnuser
TURN_SERVER_PASSWORD=change_me_strong_password

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=INFO
DEBUG=false

# ============================================================================
# Environment
# ============================================================================
ENVIRONMENT=production
